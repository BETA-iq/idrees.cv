<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>قائمة الطعام - بنفش بوتيك (محسنة)</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
<style>
:root{
  --main:#6a0dad;
  --accent:#8b5cf6;
  --bg:#fbf8ff;
  --glass-bg: rgba(255,255,255,0.45);
  --glass-border: rgba(255,255,255,0.5);
  --muted:#9ca3af;
  --text:#0f172a;
  --radius:14px;
  --shadow: 0 18px 50px rgba(13,17,23,0.06);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:'Cairo',sans-serif;background:linear-gradient(180deg,var(--bg),#ffffff);color:var(--text);-webkit-font-smoothing:antialiased}
.bg-glass{position:fixed;inset:0;pointer-events:none;z-index:0;background:radial-gradient(600px 400px at 20% 20%, rgba(138,85,248,0.08), transparent 15%),radial-gradient(500px 300px at 80% 80%, rgba(106,13,173,0.06), transparent 18%)}
.container{max-width:1200px;margin:28px auto;padding:18px;display:grid;grid-template-columns:360px 1fr;gap:22px;align-items:start;position:relative;z-index:10}
.logo{width:64px;height:64px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--main));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;font-size:22px}
.sidebar{background:linear-gradient(180deg,rgba(255,255,255,0.85),rgba(255,255,255,0.75));border-radius:var(--radius);padding:18px;backdrop-filter:blur(8px) saturate(110%);border:1px solid var(--glass-border);box-shadow:var(--shadow)}
.categories{display:flex;flex-direction:column;gap:8px;margin-top:10px}
.cat{padding:12px;border-radius:10px;display:flex;justify-content:space-between;align-items:center;cursor:pointer;border:1px solid transparent;transition:all .18s;background:transparent}
.cat:hover{transform:translateX(-6px)}
.cat.active{background:linear-gradient(90deg,rgba(139,92,246,0.12),rgba(139,92,246,0.06));border-color:rgba(139,92,246,0.14)}
.order{margin-top:16px;padding:14px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.88),rgba(255,255,255,0.82));border:1px solid var(--glass-border);backdrop-filter:blur(6px)}
.items{max-height:360px;overflow:auto;padding-right:6px}
.order-item{display:flex;flex-direction:column;gap:8px;padding:10px 6px;border-bottom:1px dashed rgba(15,23,42,0.04);align-items:stretch}
.qty-controls{display:flex;align-items:center;gap:6px}
.btn{display:inline-block;padding:10px 14px;border-radius:10px;text-decoration:none;border:none;cursor:pointer}
.btn-primary{background:linear-gradient(90deg,var(--accent),var(--main));color:#fff;box-shadow:0 12px 30px rgba(107,33,168,0.12);font-weight:700}
.main{min-height:78vh;padding:20px;border-radius:var(--radius);background:linear-gradient(180deg,rgba(255,255,255,0.92),rgba(255,255,255,0.9));border:1px solid var(--glass-border);backdrop-filter:blur(6px) saturate(110%);box-shadow:var(--shadow)}
.toolbar{display:flex;flex-wrap:wrap;gap:12px;justify-content:space-between;align-items:center;margin-bottom:18px}
.search input{width:100%;padding:12px;border-radius:12px;border:1px solid rgba(15,23,42,0.06);outline:none}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:18px}
.card{border-radius:12px;padding:14px;background:linear-gradient(180deg,rgba(255,255,255,0.96),rgba(255,255,255,0.94));border:1px solid rgba(255,255,255,0.45);box-shadow:0 10px 30px rgba(16,24,40,0.04);position:relative;overflow:hidden;cursor:pointer;transition:transform .22s,box-shadow .22s}
.card::after{content:"";position:absolute;left:-40%;top:-40%;width:180%;height:180%;background:linear-gradient(120deg,rgba(255,255,255,0.06),rgba(255,255,255,0.02));transform:rotate(25deg);opacity:0.9;pointer-events:none}
.thumb{width:100%;height:140px;border-radius:10px;background:linear-gradient(120deg,rgba(139,92,246,0.06),rgba(139,92,246,0.02));display:flex;align-items:center;justify-content:center;font-weight:800;color:var(--main);font-size:16px}
.price{position:absolute;top:12px;left:12px;background:rgba(255,255,255,0.98);padding:6px 10px;border-radius:10px;font-weight:800;border:1px solid rgba(107,33,168,0.06)}
.ribbon{position:absolute;right:-36px;top:12px;transform:rotate(45deg);background:linear-gradient(90deg,var(--accent),var(--main));color:#fff;padding:6px 46px;font-weight:800}
.note-area textarea{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(15,23,42,0.06);min-height:40px}
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:18px;visibility:hidden;opacity:0;transition:all .22s;z-index:60}
.modal.open{visibility:visible;opacity:1}
.sheet{width:560px;max-width:96%;background:linear-gradient(180deg,rgba(255,255,255,0.98),rgba(255,255,255,0.96));border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.5);box-shadow:0 30px 60px rgba(16,24,40,0.08);transform:translateY(20px);transition:transform .22s}
.modal.open .sheet{transform:translateY(0)}
@media(max-width:900px){.container{grid-template-columns:1fr;padding:12px}.grid{grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}.menu-btn{display:inline-block}}
</style>
</head>
<body>
<div class="bg-glass" aria-hidden></div>
<div class="container">
  <aside class="sidebar" id="desktopSidebar">
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:10px">
      <div class="logo">ب</div>
      <div>
        <h1 style="margin:0">ادريس - اختبار</h1>
        <div style="font-size:13px;color:var(--muted)">قائمة تفاعلية</div>
      </div>
    </div>
    <div class="categories" id="cats"></div>
    <div class="order" aria-live="polite">
      <h3>سلة الطلب</h3>
      <div class="items" id="orderItems"><p style="color:var(--muted);font-size:13px">السلة فارغة - أضف أطباقاً من اليمين</p></div>
      <div class="order-total"><span>المجموع</span><span id="total">0 IQD</span></div>
      <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
        <button class="btn btn-primary" id="startCheckout">أكمل الطلب</button>
      </div>
    </div>
  </aside>

  <main class="main" role="main">
    <div class="toolbar">
      <div class="search"><input id="search" placeholder="ابحث عن طبق أو مكوّن..." /></div>
      <div><button class="btn btn-primary" id="demoMood">تجربة بنفش</button></div>
    </div>
    <section class="grid" id="grid"></section>
  </main>
</div>

<div class="modal" id="modal">
  <div class="sheet">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
      <h3 id="m-title">تفاصيل الطبق</h3>
      <button id="closeModal" class="btn">إغلاق ✕</button>
    </div>
    <div id="m-body"></div>
    <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
      <button class="btn btn-primary" id="addFromModal">أضف إلى السلة</button>
    </div>
  </div>
</div>

<div class="modal" id="checkoutModal">
  <div class="sheet">
    <h3>استكمال الطلب</h3>
    <div style="margin-top:8px" id="checkoutList"></div>
    <form id="checkoutForm" style="margin-top:12px">
      <div style="display:flex;flex-direction:column;gap:8px">
        <div style="display:flex;flex-direction:column"><label>الاسم الكامل</label><input type="text" id="custName" class="input" required></div>
        <div style="display:flex;flex-direction:column"><label>رقم الهاتف</label><input type="tel" id="custPhone" class="input" placeholder="07718009200 أو 7718009200 أو +9647718009200" required></div>
        <div style="display:flex;flex-direction:column"><label>العنوان الكامل</label><textarea id="custAddress" class="input" placeholder="المنصور بغداد" required></textarea></div>
      </div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button type="button" class="btn" id="cancelCheckout">إلغاء</button>
        <button type="submit" class="btn btn-primary">إرسال إلى واتساب</button>
      </div>
    </form>
  </div>
</div>

<script>
const DATA={categories:['الأكثر مبيعاً','مشاوي','بيتزا','سندويشات','مشروبات','حلويات','سلطات','مقبلات','وجبات سريعة','وجبات عائلية'],dishes:[{id:1,name:'برغر لحم كلاسيكي',cat:'الأكثر مبيعاً',desc:'لحم بقري طازج، جبنة شيدر، صلصة خاصة',price:45000,tag:'شائع'},{id:2,name:'شيش طاووق',cat:'مشاوي',desc:'قطع دجاج متبلة ومشوية على الفحم',price:38000,tag:'مميز'},{id:3,name:'كباب حلبي',cat:'مشاوي',desc:'مفروم لحم مع بهارات خاصة',price:42000,tag:'شائع'},{id:4,name:'بيتزا مارجريتا',cat:'بيتزا',desc:'صوص طماطم، جبنة موزاريلا، ريحان',price:48000,tag:'مفضل'},{id:5,name:'بيتزا بيبروني',cat:'بيتزا',desc:'قطع بيبروني حارة وجبنة موزاريلا',price:52000,tag:'حار'},{id:6,name:'شاورما دجاج',cat:'سندويشات',desc:'شاورما دجاج طازجة مع صلصات',price:27000,tag:'شائع'},{id:7,name:'فاهيتا دجاج',cat:'سندويشات',desc:'خضار مشوية وتتبيلة مميزة',price:30000,tag:'مميز'},{id:8,name:'عصير برتقال طبيعي',cat:'مشروبات',desc:'برتقال طازج مع ثلج',price:10000,tag:'طبيعي'},{id:9,name:'عصير مانجو',cat:'مشروبات',desc:'مانجو ناضجة مخفوقة',price:12000,tag:'طبيعي'},{id:10,name:'تشيز كيك بالتوت',cat:'حلويات',desc:'قوام كريمي مع طبقة توت',price:18000,tag:'حلو'},{id:11,name:'سلطة تبولة',cat:'سلطات',desc:'برغل، بقدونس، طماطم، ليمون',price:9000,tag:'صحي'},{id:12,name:'حمص بالطحينة',cat:'مقبلات',desc:'طحينة أصلية مع لمسة زيت زيتون',price:8000,tag:'تقليدي'},{id:13,name:'بطاطا مقلية',cat:'مقبلات',desc:'مقرمشة مع صوص خاص',price:7000,tag:'شائع'},{id:14,name:'ستيك لحم بقري',cat:'وجبات عائلية',desc:'ستيك متبل ومشوي بحسب اختيارك',price:95000,tag:'فاخر'},{id:15,name:'باستا ألفريدو',cat:'وجبات سريعة',desc:'مكرونة مع صوص كريمي وجبن بارميجيانو',price:36000,tag:'مفضل'},{id:16,name:'ريزو توست',cat:'سندويشات',desc:'توست محشو جبنة وشرائح لحم',price:22000,tag:'خفيف'},{id:17,name:'كباب باللحم الضأن',cat:'مشاوي',desc:'قطع لحم ضأن مع توابل خاصة',price:68000,tag:'مميز'},{id:18,name:'عصير ليمون بالنعناع',cat:'مشروبات',desc:'عصير ليمون طازج مع نعناع',price:9000,tag:'منعش'},{id:19,name:'كريم بروليه',cat:'حلويات',desc:'تحلية فرنسية مع سطح مقرمش',price:20000,tag:'راقي'},{id:20,name:'سلطة سيزر',cat:'سلطات',desc:'خس، جبن، كرونش، صوص سيزر',price:14000,tag:'كلاسيكي'}]}
let order=[]
const catsEl=document.getElementById('cats')
DATA.categories.forEach((c,i)=>{const el=document.createElement('div');el.className='cat'+(i===0?' active':'');el.innerHTML=`<span>${c}</span><span style='opacity:.6;font-size:12px'>${DATA.dishes.filter(d=>d.cat===c).length}</span>`;el.onclick=()=>{document.querySelectorAll('.cat').forEach(x=>x.classList.remove('active'));el.classList.add('active');renderGrid(c)};catsEl.appendChild(el)})
const grid=document.getElementById('grid')
function renderGrid(filter){grid.innerHTML='';const items=DATA.dishes.filter(d=>!filter||d.cat===filter);items.forEach(d=>{const card=document.createElement('article');card.className='card';card.setAttribute('data-id',d.id);card.innerHTML=`<div class="price">${d.price.toLocaleString()} IQD</div><div class="thumb">${d.name.split(' ').slice(0,3).join(' ')}</div><h4>${d.name}</h4><p style="margin:6px 0 0 0;color:var(--muted)">${d.desc}</p><div class='card-actions' style="margin-top:12px"><small style='color:var(--muted)'>${d.tag}</small><div><button class='btn' onclick='openModal(${d.id}, event)'>عرض</button> <button class='btn' onclick='addToOrder(${d.id}, event)'>أضف</button></div></div><div class='ribbon' style='display:${d.tag?"block":"none"}'>${d.tag}</div>`;grid.appendChild(card)})}
renderGrid(DATA.categories[0])
const modal=document.getElementById('modal')
let currentModalId=null
function openModal(id,e){if(e) e.stopPropagation();const dish=DATA.dishes.find(x=>x.id===id);currentModalId=id;document.getElementById('m-title').innerText=dish.name;document.getElementById('m-body').innerHTML=`<div style='display:flex;gap:12px;align-items:center'><div style='width:140px;height:120px;border-radius:10px;background:linear-gradient(120deg,rgba(139,92,246,0.06),rgba(139,92,246,0.02));display:flex;align-items:center;justify-content:center;font-weight:800;color:var(--main)'>${dish.name.split(' ').slice(0,3).join(' ')}</div><div><p style='margin:0 0 6px 0;color:var(--muted)'>${dish.desc}</p><p style='margin:0;font-weight:800'>السعر: ${dish.price.toLocaleString()} IQD</p><div style='margin-top:10px;display:flex;gap:8px;align-items:center'><label>كمية:</label><input id="modalQty" type="number" min="1" value="1" style="width:80px;padding:6px;border-radius:8px;border:1px solid rgba(15,23,42,0.06);text-align:center"></div></div></div>`;modal.classList.add('open')}
document.getElementById('closeModal').addEventListener('click',()=>{modal.classList.remove('open');currentModalId=null})
document.getElementById('addFromModal').addEventListener('click',()=>{if(currentModalId){const q=document.getElementById('modalQty').value||1;addToOrder(currentModalId,null,parseInt(q));}modal.classList.remove('open');currentModalId=null})
function addToOrder(id,e,qty=1){if(e) e.stopPropagation();const dish=DATA.dishes.find(x=>x.id===id);const existing=order.find(o=>o.id===id);if(existing){existing.qty+=qty}else{order.push({id:dish.id,name:dish.name,price:dish.price,qty:qty,note:''})}renderOrder();const card=document.querySelector(`.card[data-id='${id}']`);if(card){card.animate([{transform:'scale(1)'},{transform:'scale(1.04)'},{transform:'scale(1)'}],{duration:260})}}
function renderOrder(){const container=document.getElementById('orderItems');container.innerHTML='';if(order.length===0){container.innerHTML=`<p style="color:var(--muted);font-size:13px">السلة فارغة - أضف أطباقاً من اليمين</p>`;document.getElementById('total').innerText='0 IQD';return}let total=0;order.forEach(o=>{total+=o.price*o.qty;const el=document.createElement('div');el.className='order-item';el.innerHTML=`<div style="display:flex;justify-content:space-between;align-items:center"> <div style="display:flex;flex-direction:column"> <strong>${o.name}</strong> <div style="font-size:13px;color:var(--muted);margin-top:4px">السعر الفردي: ${(o.price).toLocaleString()} IQD</div> </div> <div style="display:flex;flex-direction:column;align-items:flex-end;min-width:160px"> <div style="display:flex;align-items:center;gap:8px"> <button onclick='decrement(${o.id})' class='btn'>-</button> <input type="number" min="1" value="${o.qty}" onchange="changeQty(${o.id}, this.value)" style="width:64px;padding:6px;border-radius:8px;border:1px solid rgba(15,23,42,0.06);text-align:center"> <button onclick='increment(${o.id})' class='btn'>+</button> </div> <div style="margin-top:8px;font-weight:800">المجموع: ${(o.price*o.qty).toLocaleString()} IQD</div> </div> </div> <div style="display:flex;gap:8px;margin-top:8px;align-items:center"> <button class="btn" onclick="toggleNote(${o.id})">ملاحظة</button> <button class="btn" onclick="removeItem(${o.id})">حذف</button> </div> <div class="note-area" id="note-area-${o.id}" style="display:${o.note? 'block':'none'};margin-top:8px"> <textarea placeholder="أضف ملاحظة للطبق (مثل: بدون بصل)" oninput="saveNote(${o.id}, this.value)">${o.note||''}</textarea> </div>`;container.appendChild(el)})
document.getElementById('total').innerText=total.toLocaleString()+' IQD'}
function increment(id){const it=order.find(o=>o.id===id);if(it){it.qty++;renderOrder()}}function decrement(id){const it=order.find(o=>o.id===id);if(it){it.qty--;if(it.qty<=0) order.splice(order.indexOf(it),1);renderOrder()}}function changeQty(id,val){const it=order.find(o=>o.id===id);const n=parseInt(val)||1; if(it){if(n<=0){order.splice(order.indexOf(it),1)}else{it.qty=n}}renderOrder()}function toggleNote(id){const area=document.getElementById('note-area-'+id);if(!area)return;area.style.display=area.style.display==='none'?'block':'none'}function saveNote(id,val){const it=order.find(o=>o.id===id);if(it){it.note=val}}function removeItem(id){const idx=order.findIndex(o=>o.id===id);if(idx>-1){order.splice(idx,1);renderOrder()}}
document.getElementById('startCheckout').addEventListener('click',()=>{if(order.length===0){alert('السلة فارغة');return}const list=document.getElementById('checkoutList');list.innerHTML='';order.forEach(o=>{const div=document.createElement('div');div.style.display='flex';div.style.justifyContent='space-between';div.style.padding='8px 0';let label=o.name + (o.note? (' ('+o.note+')') : '');div.innerHTML=`<div>${label} ×${o.qty}</div><div>${(o.price*o.qty).toLocaleString()} IQD</div>`;list.appendChild(div)});document.getElementById('checkoutModal').classList.add('open')})
document.getElementById('cancelCheckout').addEventListener('click',()=>{document.getElementById('checkoutModal').classList.remove('open')})
document.getElementById('checkoutForm').addEventListener('submit', e=>{e.preventDefault();const name=document.getElementById('custName').value.trim();const phone=document.getElementById('custPhone').value.trim();const address=document.getElementById('custAddress').value.trim();if(!name){alert('يرجى إدخال الاسم الكامل');return}const phoneDigits=phone.replace(/\D/g,'');if(!/^0?7\d{9}$/.test(phoneDigits) && !/^9647\d{9}$/.test(phoneDigits)){alert('يرجى إدخال رقم هاتف عراقي صحيح');return}if(address.split(/\s+/).length<2){alert('يرجى كتابة عنوان لا يقل عن كلمتين');return}let msgLines='طلب جديد\n\n';msgLines+=`الاسم: ${name}\nالرقم: ${phone}\nالعنوان: ${address}\n\n`;msgLines+='الطلبات:\n';msgLines+='الطبق | الكمية | السعر | المجموع\n';msgLines+=order.map(o=>{const notePart = o.note? ` (ملاحظة: ${o.note})` : '';return `${o.name}${notePart} | ${o.qty} | ${o.price.toLocaleString()} IQD | ${(o.price*o.qty).toLocaleString()} IQD`}).join('\n');const total=order.reduce((s,o)=>s+o.price*o.qty,0).toLocaleString();msgLines+=`\n\nالمجموع الكلي: ${total} IQD\n\nشكراً`;const waNumber='+9647855321655';const waUrl=`https://wa.me/${waNumber.replace('+','')}?text=${encodeURIComponent(msgLines)}`;window.open(waUrl,'_blank');document.getElementById('checkoutModal').classList.remove('open')})
// demo animation
const allCats=document.querySelectorAll('.cat');allCats.forEach((c,i)=>{if(i>0) c.classList.remove('active')});
</script>
</body>
</html>
